webpackJsonp([3],{"1oUW":function(e,t,i){"use strict";var n={name:"time-line-menu",props:{timeInfo:{type:Array,required:!0,validator:function(e){return e.length>0}},initialIndex:{type:Number,default:function(){return 0},validator:function(e){return e>=0}}},data:function(){return{timeLine:null,ulWidth:0,sliderWidth:0,paddingRight:0,paddingLeft:0,selectedIndex:this.initialIndex}},watch:{timeInfo:function(e){this.selectedIndex=0}},methods:{init:function(){this.timeLine=this.$refs.timeline,this.ulWidth=this.timeLine.offsetWidth,this.sliderWidth=this.timeLine.children[0].offsetWidth;var e=window.getComputedStyle(this.timeLine);this.paddingRight=+e.paddingRight.replace("px",""),this.paddingLeft=+e.paddingLeft.replace("px",""),this.scroll(this.selectedIndex),this.addClickListener()},addClickListener:function(){var e=this;this.timeLine.addEventListener("click",function(t){var i=t.target;if("LI"===i.tagName){var n=e.selectedIndex;e.selectedIndex=+i.dataset.index;var a=i.dataset.date;e.scroll(e.selectedIndex),e.$emit("timeLineClick",{proSelectedIndex:n,selectedIndex:e.selectedIndex,selectedDate:a})}})},scroll:function(e){var t=this,i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=window.cancelAnimationFrame||window.mozCancelAnimationFrame,a=this.timeLine.children.length*t.sliderWidth-(t.ulWidth-t.paddingLeft-t.paddingRight),s=(+e+1)*t.sliderWidth-(this.ulWidth-t.paddingLeft-t.paddingRight)/2-t.sliderWidth/2;s<0&&(s=0),s>a&&(s=a);var d=i(function e(){var a=t.timeLine.scrollLeft;a=t.timeLine.scrollLeft>s?t.timeLine.scrollLeft-20<s?s:t.timeLine.scrollLeft-20:t.timeLine.scrollLeft+20>s?s:t.timeLine.scrollLeft+20,t.timeLine.scrollTo(a,0),n(d),Math.abs(t.timeLine.scrollLeft-s)>=5&&(d=i(e))})}},mounted:function(){this.init()}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ul",{ref:"timeline",staticClass:"time-line"},e._l(e.timeInfo,function(t,n){return i("li",{class:n===e.selectedIndex?"time active":"time",attrs:{"data-index":n,"data-date":t.showDate}},[e._v(e._s(t.dateShow)+"\n    ")])}),0)])},staticRenderFns:[]};var s=i("VU/8")(n,a,!1,function(e){i("xXhv")},"data-v-0ad7940c",null);t.a=s.exports},EbuK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),s=i("NYxO"),d=i("543z"),c=i("AJBx"),o=i("1oUW"),m=i("w8sg"),l={name:"cinema",components:{Loading:c.a,TimeLine:o.a,CinemaItem:m.a},data:function(){return{pageStatus:"loading",error:"",movieId:"",timeLine:[],cinemaList:[],selectedDate:""}},computed:a()({},Object(s.c)({cinemasInfo:"cinemas",cityCode:"cityCode"})),methods:a()({},Object(s.b)({getCinemaDetails:"GET_CINEMA_DETAILS"}),{fetchData:function(e,t){var i=this;this.getCinemaDetails({cityCode:e,movieId:t}).then(function(){i.pageStatus="completed",i.timeLine=i.cinemasInfo,i.cinemaList=i.cinemasInfo[0].cinemaList,i.selectedDate=i.cinemasInfo[0].showDate}).catch(function(e){return console.log(e)})},timeLineClick:function(e){if(this.selectedDate!=e.selectedDate){var t=e.selectedIndex;this.cinemaList=this.cinemasInfo[t].cinemaList,this.selectedDate=e.selectedDate}},cinemaClick:function(e){d.b.setTitleInfo("shows",e.cinemaName),this.$router.push({name:"shows",params:{cinemaId:e.cinemaId},query:{movieId:this.movieId,date:this.selectedDate}})}}),watch:{$route:function(e,t){if("cinema"===e.name){var i=e.params.movieId;i&&i!=this.movieId&&(this.pageStatus="loading",this.movieId=i,this.fetchData(this.movieId))}}},created:function(){this.movieId=this.$route.params.movieId,this.fetchData(this.cityCode,this.movieId)}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cinema"},["completed"===e.pageStatus?i("div",[i("TimeLine",{attrs:{timeInfo:e.timeLine},on:{timeLineClick:e.timeLineClick}}),e._v(" "),i("ul",e._l(e.cinemaList,function(t,n){return i("CinemaItem",{key:n,attrs:{cinemaInfo:t,isShowDis:!1},on:{selectCinema:e.cinemaClick}})}),1)],1):e._e(),e._v(" "),"loading"===e.pageStatus?i("Loading"):e._e()],1)},staticRenderFns:[]};var h=i("VU/8")(l,r,!1,function(e){i("teS1")},"data-v-5869f4b0",null);t.default=h.exports},teS1:function(e,t){},xXhv:function(e,t){}});
//# sourceMappingURL=3.92bb1f51a5a7df3031b3.js.map