{"version":3,"sources":["webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?8b01","webpack:///./src/components/Login.vue"],"names":["Login","name","data","normalLoginWay","quickLoginWay","components","SliderBar","Footer","methods","extends_default","Object","vuex_esm","login","checkMobile","value","test","initView","tip","this","$refs","style","left","document","documentElement","clientWidth","display","visibility","showTip","top","setTimeout","changeLoginWay","result","selectedTab","onMobileInput","e","target","trim","smsCode","disabled","getCaptacha","mobile","count","captacha","innerHTML","timer","setInterval","clearInterval","$store","dispatch","type","message","doLogin","_this","account","ticket","username","password","focus","offsetTop","offsetHeight","topTip","then","redirect","$route","query","$router","replace","go","catch","console","log","mounted","components_Login","render","_vm","_h","$createElement","_c","_self","ref","attrs","id","_v","tabNameL","tabNameR","on","switchTab","staticClass","directives","rawName","expression","placeholder","required","input","click","pattern","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.a5f7087ad1642a6ad0d3.js","sourcesContent":["<template>\n  <div>\n    <div ref=\"topTip\" id=\"topTip\"></div>\n    <div>\n      <SliderBar :tabNameL=\"'美团账号登陆'\" :tabNameR=\"'手机账号登陆'\" @switchTab=\"changeLoginWay\"/>\n    </div>\n    <div class=\"login-way\">\n      <div class=\"normal-login-way\" v-show=\"normalLoginWay\">\n        <div>\n          <div class=\"account\">\n            <input ref=\"username\" id=\"username\" class=\"input-weak\" type=\"text\"\n                   placeholder=\"账户名/手机号/Email\" name=\"email\" value=\"\" required>\n          </div>\n        </div>\n        <div>\n          <div class=\"password\">\n            <input ref=\"password\" id=\"password\" class=\"input-weak\" type=\"password\" placeholder=\"请输入您的密码\" name=\"password\"\n                   required=\"\">\n          </div>\n        </div>\n      </div>\n      <div class=\"quick-login-way\" v-show=\"quickLoginWay\">\n        <!-- 手机号码 -->\n        <div>\n          <div class=\"captacha\">\n            <input ref=\"mobile\" type=\"tel\" name=\"mobile\" class=\"input-captacha\"\n                   placeholder=\"请输入手机号\" @input=\"onMobileInput\">\n            <button ref=\"smsCode\" type=\"button\" class=\"btn btn-captacha\" disabled @click=\"getCaptacha\">发送验证码</button>\n          </div>\n        </div>\n        <!-- 验证码 -->\n        <div>\n          <div class=\"tel\">\n            <input ref=\"captacha\" class=\"input-weak\" name=\"code\" type=\"tel\" pattern=\"[0-9]+\"\n                   placeholder=\"请输入短信验证码\" disabled=\"disabled\">\n          </div>\n        </div>\n      </div>\n      <!-- v-show=\"isShowTip\"-->\n      <div ref=\"tip\" id=\"tip\" class=\"tip\">请填写该字段</div>\n    </div>\n    <div class=\"btn-wrapper\">\n      <button ref=\"login\" type=\"submit\" class=\"btn btn-larger btn-block disabled login-btn\" @click=\"doLogin\">登录</button>\n    </div>\n    <Footer :type=\"'simple'\"/>\n  </div>\n</template>\n\n<script>\n\n  import {mapActions} from 'vuex'\n\n  import SliderBar from './common/SliderBar'\n  import Footer from './Footer'\n\n  export default {\n    name: \"login\",\n    data() {\n      return {\n        normalLoginWay: true,\n        quickLoginWay: false\n      }\n    },\n    components: {\n      SliderBar,\n      Footer\n    },\n    methods: {\n\n      ...mapActions({\n        login: 'LOGIN'\n      }),\n\n      // 检查手机号码是否正确\n      checkMobile: function (value) {\n        // 验证手机号码\n        var reg = /^[1][3,4,5,7,8][0-9]{9}$/;\n        return reg.test(value);\n      },\n\n      // 初始化布局\n      initView: function () {\n        var tip = this.$refs.tip;\n        tip.style.left = (document.documentElement.clientWidth - tip.clientWidth) / 2 + 'px';\n        tip.style.display = 'none';\n        tip.style.visibility = 'visible';\n      },\n\n      // 显示tip\n      showTip: function (top) {\n        var tip = this.$refs.tip;\n        // 设置样式\n        tip.style.top = top + 'px';\n        tip.style.display = '';\n        setTimeout(() => {\n          tip.style.display = 'none';\n        }, 1000);\n      },\n\n      // 选择登陆方式\n      changeLoginWay: function (result) {\n\n        if (result.selectedTab === 'leftTab') {\n\n          this.normalLoginWay = true;\n          this.quickLoginWay = false;\n          return;\n        }\n\n        if (result.selectedTab === 'rightTab') {\n\n          this.quickLoginWay = true;\n          this.normalLoginWay = false;\n          return;\n        }\n      },\n\n      // 监听输入\n      onMobileInput: function (e) {\n        var target = e.target;\n        var value = target.value.trim();\n        this.$refs.smsCode.disabled = !this.checkMobile(value);\n      },\n\n      // 获取验证码\n      getCaptacha: function () {\n\n        var mobile = this.$refs.mobile.value.trim();\n\n        if (!this.checkMobile(mobile)) {\n          this.$store.dispatch({\n            type: 'OPEN_TIP',\n            message: '请输入正确的11位手机号码'\n          });\n          return;\n        }\n\n        var target = e.target;\n        // 60秒倒计时\n        var count = 60;\n\n        function timerDown() {\n          target.innerHTML = --count + '秒';\n          // 判断倒计时是否结束\n          if (count === 0) {\n            clearInterval(timer);\n            target.disabled = false;\n            target.innerHTML = '再次发送验证码';\n          }\n        }\n\n        this.$refs.captacha.disabled = false;\n        target.disabled = true;\n        target.innerHTML = count + '秒';\n        // 开始倒计时\n        var timer = setInterval(timerDown, 1000);\n      },\n\n      // 登陆\n      doLogin: function () {\n\n        var account = '';\n        var ticket = '';\n        var type = '';\n\n        if (this.normalLoginWay) { // 账号密码\n          var username = this.$refs.username;\n          var password = this.$refs.password;\n\n          // 判断用户名是否为空\n          if (!username.value.trim()) {\n            //  获取焦点\n            username.focus();\n            this.showTip(username.offsetTop + username.offsetHeight);\n            return;\n          }\n\n          // 判断密码是否为空\n          if (!password.value.trim()) {\n            //  获取焦点\n            password.focus();\n            this.showTip(password.offsetTop + password.offsetHeight);\n            return;\n          }\n\n          account = username.value.trim();\n          ticket = password.value.trim();\n          type = 'normalLoginWay';\n\n        } else { // 快速登陆\n\n          var topTip = this.$refs.topTip;\n\n          var mobile = this.$refs.mobile.value.trim();\n          var captacha = this.$refs.captacha.value.trim();\n\n          // 验证手机号码\n          if (!this.checkMobile(mobile)) {\n\n            topTip.innerHTML = '请输入正确的手机号';\n            topTip.style.display = 'block';\n            return;\n          }\n\n          // 判断验证码是否为空\n          if (!captacha) {\n            topTip.innerHTML = '请输入验证码';\n            topTip.style.display = 'block';\n            return;\n          }\n\n          account = mobile;\n          ticket = captacha;\n          type = 'quickLoginWay';\n        }\n\n        // 登陆\n        this.login({\n          account,\n          ticket,\n          type\n        })\n          .then(() => {\n            var redirect = this.$route.query.redirect;\n            if (redirect)\n              this.$router.replace(redirect);\n            else\n              this.$router.go(-1);\n          })\n          .catch(e => console.log(e));\n      }\n    },\n    mounted() {\n      this.initView();\n    }\n  }\n</script>\n\n<style scoped>\n  @import \"../assets/css/login.css\";\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"topTip\",attrs:{\"id\":\"topTip\"}}),_vm._v(\" \"),_c('div',[_c('SliderBar',{attrs:{\"tabNameL\":'美团账号登陆',\"tabNameR\":'手机账号登陆'},on:{\"switchTab\":_vm.changeLoginWay}})],1),_vm._v(\" \"),_c('div',{staticClass:\"login-way\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.normalLoginWay),expression:\"normalLoginWay\"}],staticClass:\"normal-login-way\"},[_c('div',[_c('div',{staticClass:\"account\"},[_c('input',{ref:\"username\",staticClass:\"input-weak\",attrs:{\"id\":\"username\",\"type\":\"text\",\"placeholder\":\"账户名/手机号/Email\",\"name\":\"email\",\"value\":\"\",\"required\":\"\"}})])]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"password\"},[_c('input',{ref:\"password\",staticClass:\"input-weak\",attrs:{\"id\":\"password\",\"type\":\"password\",\"placeholder\":\"请输入您的密码\",\"name\":\"password\",\"required\":\"\"}})])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.quickLoginWay),expression:\"quickLoginWay\"}],staticClass:\"quick-login-way\"},[_c('div',[_c('div',{staticClass:\"captacha\"},[_c('input',{ref:\"mobile\",staticClass:\"input-captacha\",attrs:{\"type\":\"tel\",\"name\":\"mobile\",\"placeholder\":\"请输入手机号\"},on:{\"input\":_vm.onMobileInput}}),_vm._v(\" \"),_c('button',{ref:\"smsCode\",staticClass:\"btn btn-captacha\",attrs:{\"type\":\"button\",\"disabled\":\"\"},on:{\"click\":_vm.getCaptacha}},[_vm._v(\"发送验证码\")])])]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"tel\"},[_c('input',{ref:\"captacha\",staticClass:\"input-weak\",attrs:{\"name\":\"code\",\"type\":\"tel\",\"pattern\":\"[0-9]+\",\"placeholder\":\"请输入短信验证码\",\"disabled\":\"disabled\"}})])])]),_vm._v(\" \"),_c('div',{ref:\"tip\",staticClass:\"tip\",attrs:{\"id\":\"tip\"}},[_vm._v(\"请填写该字段\")])]),_vm._v(\" \"),_c('div',{staticClass:\"btn-wrapper\"},[_c('button',{ref:\"login\",staticClass:\"btn btn-larger btn-block disabled login-btn\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.doLogin}},[_vm._v(\"登录\")])]),_vm._v(\" \"),_c('Footer',{attrs:{\"type\":'simple'}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27e71d56\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27e71d56\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27e71d56\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27e71d56\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}