webpackJsonp([5],{nbUD:function(t,e){},o62O:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("NYxO"),o=s("543z"),r=s("E2mV"),c={name:"rating-bar",props:{score:{typeL:Number,required:!0}},data:function(){return{full:"http://ms0.meituan.net/canary/img/star-full-new.png",half:"http://ms0.meituan.net/canary/img/star-half-new.png",empty:"http://ms0.meituan.net/canary/img/star-empty-new.png"}},methods:{buildStarts:function(t){for(var e=[],s=parseInt(t/2),a=t%2==0?0:1,i=0;i<5;i++)i<s?e.push(this.full):0!==a?(a=0,e.push(this.half)):e.push(this.empty);return e}},computed:{starts:function(){return this.buildStarts(this.score)}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"ratingBar",staticClass:"rating"},[this._l(this.starts,function(t){return e("img",{staticClass:"img noneBg",attrs:{src:t}})}),this._v(" "),e("span",[this._v(this._s(this.score))])],2)])},staticRenderFns:[]};var m=s("VU/8")(c,v,!1,function(t){s("pFGh")},"data-v-5dea0270",null).exports,l=s("TVmP"),d=s("AJBx"),u={name:"movie-page",components:{RatingBar:m,Footer:l.a,Loading:d.a},data:function(){return{pageStatus:"loading",LazyLoader:null,movieId:"",bgimg:"",posterUrl:"",movieName:"",movieEnm:"",score:0,snum:0,cat:"",src:"",dur:"",pubDesc:"",dra:"",egg:!1,staff:[]}},computed:i()({},Object(n.c)(["movieInfo"])),methods:i()({},Object(n.b)({getMovieInfo:"GET_MOVIE_INFO"}),{fetchData:function(t){var e=this;this.getMovieInfo({movieId:t}).then(function(){e.bgimg=e.movieInfo.bgimg,e.posterUrl=e.movieInfo.posterUrl,e.movieName=e.movieInfo.nm,e.movieEnm=e.movieInfo.enm,e.score=e.movieInfo.sc,e.snum=e.movieInfo.snum,e.cat=e.movieInfo.cat,e.src=e.movieInfo.src,e.dur=e.movieInfo.dur,e.pubDesc=e.movieInfo.pubDesc,e.dra=e.movieInfo.dra,e.egg=e.movieInfo.egg,e.staff=e.movieInfo.staff,e.pageStatus="completed",e.$nextTick(function(){this.staff.length>0&&!this.LazyLoader&&(this.LazyLoader=new r.a({el:".movie-celebrities",orientation:"horizontal"}))})}).catch(function(t){return console.log(t)})},initLayout:function(){var t=this.$refs.intro,e=this.$refs.expander;t.dataset.status="closed",t.classList.remove("text-expander-expand-true"),e.style.maxHeight=""},expandCloseContent:function(){var t=this.$refs.intro,e=t.dataset.status,s=this.$refs.expander;"closed"===e?(t.dataset.status="open",t.classList.add("text-expander-expand-true"),s.style.maxHeight=this.$refs.context.clientHeight/window.devicePixelRatio+"rem"):(t.dataset.status="closed",t.classList.remove("text-expander-expand-true"),s.style.maxHeight="")},toCinemaPage:function(){o.b.setTitleInfo("cinema",this.movieInfo.nm),this.$router.push({name:"cinema",params:{movieId:this.movieId}})}}),watch:{$route:function(t,e){if("movie"===t.name){var s=t.params.movieId;s!==this.movieId&&(this.pageStatus="loading",this.LazyLoader=null,this.movieId=s,this.initLayout(),this.fetchData(this.movieId))}}},created:function(){this.movieId=this.$route.params.movieId,this.fetchData(this.movieId)}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["completed"===t.pageStatus?s("div",[s("div",{staticClass:"movie-page"},[s("section",{staticClass:"movie-header"},[s("div",{staticClass:"movie"},[s("div",{staticClass:"movie-background",style:"background-image:url("+t.bgimg+")"}),t._v(" "),s("div",{staticClass:"movie-filter"}),t._v(" "),s("div",{staticClass:"movie-container clearfix"},[s("div",{staticClass:"movie-cover movie-with-video"},[s("a",{staticClass:"link"},[s("img",{staticClass:"img noneBg",attrs:{src:t.posterUrl}})])]),t._v(" "),s("div",{staticClass:"movie-content"},[s("div",{staticClass:"movie-name text-ellipsis"},[s("span",[t._v(t._s(t.movieName))])]),t._v(" "),s("div",{staticClass:"movie-ename text-ellipsis"},[t._v(t._s(t.movieEnm))]),t._v(" "),s("div",{staticClass:"movie-score"},[s("div",{staticClass:"released-score"},[s("RatingBar",{attrs:{score:t.score}}),t._v(" "),s("div",{staticClass:"score-num"},[s("span",[t._v("(")]),t._v(" "),s("span",[t._v(t._s(t.snum))]),t._v(" "),s("span",[t._v("人评分)")])])],1)]),t._v(" "),s("div",{staticClass:"movie-category"},[s("span",{staticClass:"movie-cat"},[t._v(t._s(t.cat))])]),t._v(" "),s("div",{staticClass:"movie-content-row"},[s("span",[t._v(t._s(t.src))]),t._v(" "),s("span",[t._v(" / ")]),t._v(" "),s("span",[s("span",[t._v(t._s(t.dur))]),t._v(" "),s("span",[t._v(" 分钟")])]),t._v(" "),s("span")]),t._v(" "),s("div",{staticClass:"movie-content-row"},[t._v(t._s(t.pubDesc))])])])])]),t._v(" "),s("section",{staticClass:"section-seperate section-expander"},[s("a",{staticClass:"btn btn-block",on:{click:t.toCinemaPage}},[s("span",[t._v("立即购票")])]),t._v(" "),s("div",{ref:"intro",staticClass:"text-expander",attrs:{"data-status":"closed"}},[s("div",{ref:"expander",staticClass:"text-expander-content"},[s("p",{ref:"context"},[t._v(t._s(t.dra))])]),t._v(" "),s("div",{staticClass:"text-expander-button"},[s("i",{staticClass:"icon icon-chevron-down",on:{click:t.expandCloseContent}})])])]),t._v(" "),t.egg?s("section",{staticClass:"section-seperate section-tips"},[s("h3",[t._v("观影小贴士")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),s("section",{staticClass:"section-seperate section-movie-celebrities"},[s("ul",{staticClass:"movie-celebrities"},t._l(t.staff,function(e){return s("li",{key:e},[s("a",{staticClass:"link"},[s("img",{staticClass:"img noneBg lazy",attrs:{"data-lazy-src":e.photo}}),t._v(" "),s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"movie-celebrities-roles"},[t._v(t._s(e.role))])])])}),0)])]),t._v(" "),s("Footer")],1):t._e(),t._v(" "),"loading"===t.pageStatus?s("Loading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip"},[e("img",{attrs:{src:"http://p0.meituan.net/mmdb/8f52014d6b15bf93415d10cdcd16cbf52917.png"}}),this._v(" "),e("span",[this._v("有1个彩蛋，随片尾字幕出现")])])}]};var f=s("VU/8")(u,p,!1,function(t){s("nbUD")},"data-v-4079296f",null);e.default=f.exports},pFGh:function(t,e){}});
//# sourceMappingURL=5.af8750a8d6b6bd682140.js.map