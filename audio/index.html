<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/video.css">
</head>

<body>
    <div class="home">
        <div class="box">
            <audio class="ad" src=""></audio>
            <div class="main">
                <div class="bg"></div>
                <div class="play_cd">
                    <div class="play_img">
                        <img src="./img//wyy/1.jpg
                        " alt="">
                    </div>
                    <div class="play_pt">
                        <img src="./img/cd_tou.png" alt="">
                    </div>
                </div>

                <div class="msg">
                    <header>
                        <h3 class="tit"></h3>
                        <p class="singer"></p>
                    </header>
                    <section class="play_control">
                        <div class="content">
                            <div class="control_btns">
                                <div class="pl_btn prev"><svg t="1574671004486" class="icon" viewBox="0 0 1024 1024"
                                        version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7901" width="16"
                                        height="16">
                                        <path
                                            d="M108.739 86.4C84.03 86.4 64 106.413 64 131.101v760.41c0 24.688 20.03 44.701 44.739 44.701 24.709 0 44.739-20.013 44.739-44.701v-760.41c-0.001-24.688-20.031-44.701-44.739-44.701z m156.575 463.838L891.972 931.08c21.122 12.837 48.661 6.135 61.509-14.97A44.697 44.697 0 0 0 960 892.867v-760.38c0-24.702-20.042-44.727-44.765-44.727a44.801 44.801 0 0 0-23.205 6.478L265.372 473.776c-21.142 12.805-27.892 40.31-15.076 61.434a44.74 44.74 0 0 0 15.018 15.028z"
                                            p-id="7902" fill="#ffffff"></path>
                                    </svg></div>
                                <div class="pl_btn play"><svg t="1574671283918" class="icon" viewBox="0 0 1024 1024"
                                        version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12515" width="16"
                                        height="16">
                                        <path
                                            d="M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512z m0-921.6a409.6 409.6 0 1 0 409.6 409.6 409.6 409.6 0 0 0-409.6-409.6z m300.4416 435.2a47.4624 47.4624 0 0 1-50.2784 24.4736L432.128 761.1392c-1.0752 0.6656-2.304 0.6144-3.3792 1.1776a49.5616 49.5616 0 0 1-8.6528 3.072 47.6672 47.6672 0 0 1-9.8816 1.9968c-1.1264 0-2.048 0.6144-3.1744 0.6144a49.408 49.408 0 0 1-6.656-1.3312 50.5344 50.5344 0 0 1-7.7312-1.5872 45.568 45.568 0 0 1-13.056-6.656c-0.6656-0.512-1.3824-0.8192-2.048-1.3824a47.4624 47.4624 0 0 1-18.0736-32.4608c0-0.7168-0.3584-1.3824-0.4608-2.0992S358.4 720.4352 358.4 719.36v-414.72A48.6912 48.6912 0 0 1 407.04 256a298.496 298.496 0 0 0 50.432 6.8608l337.152 204.8a52.6336 52.6336 0 0 1 17.8176 69.9392zM455.7312 380.0576v248.6272l205.3632-123.904z"
                                            p-id="12516" fill="#ffffff"></path>
                                    </svg>


                                    <svg t="1575276881951" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2781" width="16" height="16">
                                        <path
                                            d="M511.5 46.5c-63 0-124 12.3-181.2 36.3-55.6 23.5-105.3 57.2-148 99.9s-75.9 93-99.4 148C58.8 388 46.5 448.9 46.5 512c0 63 12.3 124 36.3 181.2 23.5 55.6 57.2 105.3 99.9 148s92.5 76.4 148 99.9c57.2 24.1 118.1 36.3 181.2 36.3s124-12.3 181.2-36.3c55.6-23.5 105.3-57.2 148-99.9 42.7-42.8 76.4-92.5 99.9-148 24-57.2 36.3-118.1 36.3-181.2 0-63.1-12.3-124-36.3-181.2-23.5-55.6-57.2-105.3-99.9-148-42.8-42.8-92.4-76.4-148-99.9-57.7-24.1-118.6-36.4-181.6-36.4z m0.5 977.5c-69 0-136.4-13.4-199.1-40.1-61.2-25.7-115.8-62.7-162.6-109.5S66.4 772.6 40.7 711.9C13.4 648 0 581.2 0 512.3s13.4-136.3 40.1-199c25.7-61.2 62.8-115.7 109.6-162.5S251.6 66.5 312.8 40.2C376.1 13.4 443 0 512 0s136.4 13.4 199.7 40.1c61.2 25.7 115.8 62.8 162.6 109.6s83.9 101.8 109.6 162.5c26.8 63.3 40.1 130.1 40.1 199.6s-13.4 136.3-40.1 199.6c-25.7 61.2-62.8 115.7-109.6 162.5s-101.9 83.8-162.6 109.6c-63.3 26.6-130.2 40.5-199.7 40.5zM384 279.3c12.9 0 23.3 10.4 23.3 23.3v418.9c0 12.9-10.4 23.3-23.3 23.3s-23.3-10.4-23.3-23.3v-419c0-12.8 10.4-23.2 23.3-23.2z m256 0c12.9 0 23.3 10.4 23.3 23.3v418.9c0 12.9-10.4 23.3-23.3 23.3s-23.3-10.4-23.3-23.3v-419c0-12.8 10.4-23.2 23.3-23.2z"
                                            p-id="2782" fill="#ffffff"></path>
                                    </svg>
                                </div>
                                <div class="pl_btn next"><svg t="1574671186638" class="icon" viewBox="0 0 1024 1024"
                                        version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11697" width="16"
                                        height="16">
                                        <path
                                            d="M19.82091863 503.65914015c0-133.73234217 0.83687369-267.29730831-0.5021229-401.02964918-0.66949895-63.60236502 13.55734591-98.75104032 80.50720436-50.88189278 195.1588369 139.2557046 389.64817356 279.34828288 585.30913337 418.10186455 38.32879401 27.28206656 41.17416324 50.0450191 2.17587158 77.82920988-200.68219933 143.27269569-400.69490099 287.5496411-601.87922454 430.15283783-51.21664097 36.32029845-65.77823529 6.02548665-65.7782353-42.51315982 0.16737473-143.7748199 0.16737473-287.71701454 0.16737343-431.65921048z"
                                            fill="#ffffff" p-id="11698"></path>
                                        <path
                                            d="M927.99574445 505.50026226c0-133.3975927-0.16737473-266.96255883 0.16737474-400.36015152 0-30.62955998-3.51486818-70.29735059 37.32454558-72.47322218C1015.53268387 30.1562688 1010.17669489 74.17580126 1010.17669488 107.48335575c0.5021242 270.31005228 0.33474948 540.78747929 0.16737473 811.09753026 0 30.62955998 3.34749344 70.2973506-37.32454557 72.4732209-50.0450191 2.6779945-44.68903011-41.50891141-44.85640485-74.81646592-0.50212421-136.91245958-0.16737473-273.82491916-0.16737474-410.73737873z"
                                            fill="#ffffff" p-id="11699"></path>
                                    </svg></div>
                                <div class="pl_btn loop single">
                                    <svg t="1574671093073" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="10222" width="16" height="16">
                                        <path
                                            d="M959.488 263.168l-239.616-198.656L655.36 118.272l130.048 108.032H92.16v286.72h91.648V302.08h601.6l-130.56 107.52 64.512 53.76 239.616-198.656-1.024-0.512 1.536-1.024z m-135.68 457.728H239.616l130.048-108.032-64.512-53.76L65.536 757.76l1.024 0.512-1.024 0.512L305.152 957.44l64.512-53.76-130.048-108.032h675.84V512h-91.648v208.896z"
                                            p-id="10223" fill="#ffffff"></path>
                                        <path
                                            d="M551.936 609.28h-46.592V482.304l0.512-20.992 0.512-23.04c-7.68 7.68-12.8 12.8-15.872 15.36l-25.088 20.48-22.528-27.648 70.656-56.32h37.888V609.28z"
                                            p-id="10224" fill="#ffffff"></path>
                                    </svg>

                                    <svg t="1575278722181" class="icon" viewBox="0 0 1316 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="3290" width="16" height="16">
                                        <path
                                            d="M1316.571429 804.571429l-292.571429-219.428572v146.285714h-1024v146.285715h1024v146.285714l292.571429-219.428571m-73.142858-438.857143h-1243.428571v146.285714h1243.428571v-146.285714m0-365.714286h-1243.428571v146.285714h1243.428571v-146.285714"
                                            fill="#dbdbdb" p-id="3291"></path>
                                    </svg>

                                    <svg t="1575278784188" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="4284" width="16" height="16">
                                        <path
                                            d="M355.616 641.792l-100.448 99.52c-26.592 26.592-72.928 45.856-110.08 45.856H53.344v-91.744h91.744c13.312 0 36.704-9.184 45.856-18.784l99.52-99.968 65.152 65.152zM787.2 236.8V99.2l183.456 183.456-183.456 183.456v-137.6h-91.744c-13.312 0-36.704 9.184-45.856 18.784l-99.52 99.968-65.6-65.152 100.896-99.52c26.592-26.592 72.928-45.856 110.528-45.856H787.2z m0 458.656v-137.6l183.456 183.456-183.456 183.456v-137.6h-91.744c-37.6 0-83.936-19.264-110.528-45.856L190.464 347.296c-8.736-9.184-31.648-18.784-45.408-18.784H53.312V236.768h91.744c37.6 0 83.936 19.264 110.528 45.856l394.464 394.016c9.184 9.184 32.096 18.784 45.408 18.784H787.2z"
                                            p-id="4285" fill="#dbdbdb"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="volume">
                                <div class="pl_btn pl_vo">
                                    <svg t="1574672153312" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="2505" width="20" height="20">
                                        <path
                                            d="M508.8 156.16a32.725333 32.725333 0 0 0-36.693333 7.68L304.853333 332.8h-82.773333c-18.773333 0-34.133333 15.36-34.133333 34.133333v290.133334c0 18.773333 15.36 34.133333 34.133333 34.133333h82.773333l168.106667 168.96c6.826667 6.826667 15.36 10.24 23.893333 10.24a33.578667 33.578667 0 0 0 32.426667-34.133333V187.733333c0-13.653333-7.68-26.453333-20.48-31.573333z m-47.786667 597.333333l-118.613333-120.32a31.829333 31.829333 0 0 0-23.04-10.24h-63.146667V401.066667h63.146667c9.386667 0 17.066667-3.413333 23.04-10.24l118.613333-120.32v482.986666z m180.053334-97.28a33.706667 33.706667 0 0 1-25.6 11.093334c-7.68 0-16.213333-2.56-23.04-8.533334-14.506667-12.8-15.36-34.133333-2.56-47.786666 85.333333-95.573333 8.533333-187.733333 0-197.973334-12.8-14.506667-11.093333-35.84 3.413333-47.786666a33.706667 33.706667 0 0 1 47.786667 2.56c44.373333 49.493333 101.546667 174.08 0 288.426666z m102.4 91.306667a33.706667 33.706667 0 0 1-25.6 11.093333c-7.68 0-16.213333-2.56-23.04-8.533333-14.506667-12.8-15.36-34.133333-2.56-47.786667 167.253333-186.88 6.826667-372.906667 0-380.586666a33.706667 33.706667 0 0 1 2.56-47.786667 33.706667 33.706667 0 0 1 47.786666 2.56c3.413333 1.706667 209.066667 238.08 0.853334 471.04z"
                                            p-id="2506" fill="#ffffff"></path>
                                    </svg>
                                </div>
                                <div class="progress">
                                    <div class="back vobk"></div>
                                    <div class="pointer"></div>
                                </div>
                            </div>
                        </div>
                        <div class="content">
                            <div class="song_progress">
                                <div class="back songbk"></div>
                            </div>
                            <div class="nowTime songtime">00:00</div>
                            <div class="totalTime songtime"></div>
                        </div>
                    </section>
                </div>
            </div>

        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
    <script>
        var cont = 1
        var pl_img = $('.play_img').children()[0]
        var ad = $('.ad')[0]
        var lop = 0
        ad.volume = 0.65
        $('.prev').on('click', function () {
            if (cont > 1) {
                cont--
            } else {
                cont = list
            }
            Send(ad);
        })
        $('.next').on('click', function () {
            if (cont < list) {
                cont++
            } else {
                cont = 1
            }
            Send(ad);
        })
        $('.play').on('click', function () {
            // console.log(ad.paused);
            if (ad.paused) {
                ad.play()
                $('.play_pt').addClass('act')
            } else {
                ad.pause()
                $('.play_pt').removeClass('act')
            }
        })
        $('.pl_vo').on('click', function () {
            if (!ad.muted) {
                ad.muted = true
                $('.vobk').css('width', 0 + '%')
                y4 = y3
                ad.volume = 0
            } else {
                ad.muted = false
                ad.volume = y4 / 100
                $('.vobk').css('width', y4 + '%')
            }
        })
        $('.progress').on('click', function (e) {
            $('.vobk').css('width', e.offsetX + '%')
            ad.volume = e.offsetX / 100

        })
        $('.song_progress').on('click', function (e) {
            if (ad.ended) {
                Send();
            }
            ad.currentTime = x * ((e.offsetX / $(this).width()))
            $('.songbk').css('width', (e.offsetX / $(this).width()) * 100 + '%')

        })

        move('.song_progress', '.songbk');

        // move('.progress', '.vobk');


        function move(n, bg) {
            $(n).on('mousedown', function () {
                $(this).on('mousemove', function (e) {
                    // console.log(e);
                    if (n == ".song_progress") {
                        ad.currentTime = x * ((e.offsetX / $(this).width()))
                    }
                    $(bg).css('width', (e.offsetX / $(this).width()) * 100 + '%')
                })

            })
            $(n).on('mouseup', function () {
                $(n).off('mousemove')
            })
        }

        $('.loop').on('click', function () {
            if (lop == 2) {
                lop = 0
            } else {
                lop++
            }
            order(lop)
        })

        function order(loop) {
            // console.log(loop);

            switch (loop) {
                case 0:
                    $('.loop').addClass('single').removeClass('order random')
                    break;
                case 1:
                    $('.loop').addClass('order').removeClass('single random')
                    if (cont < list) {
                        cont++
                    } else {
                        cont = 1
                    }
                    break;
                case 2:
                    $('.loop').addClass('random').removeClass('order single')
                    cont = Math.floor(Math.random * list - 1)
                    break;
            }
        }

        ad.onended = function () {
            console.log(cont);

            Send(ad);

        }
        function Send(fc) {
            $.ajax({
                type: "get",
                url: "./json/wyy.json",
                data: "data",
                dataType: "json",
                success: function (e) {
                    var rt = e.result
                    list = rt.length
                    m = 0
                    rt.forEach(function (e, i) {
                        if (e.id == cont) {
                            pl_img.src = e.imgUrl
                            $('.tit').text(e.title)
                            $('.singer').text(e.singer)
                            $('.ad')[0].src = e.songUrl
                            $('.bg').css({
                                'background': "url(" + e.imgUrl + ")no-repeat center"
                            })
                        }
                    })
                    if (fc) {
                        fc.play()
                    }
                }
            });
        }
        ad.onloadedmetadata = function () {
            x = Math.floor(ad.duration)
            var yy1 = x % 60
            var y = Math.floor(x / 60) + '.' + yy1
            var z = y.split("")
            z.splice(z.indexOf('.'), 1, ':')
            var j = z.join("")
            $('.totalTime').text("0" + j)
        }

        ad.oncanplaythrough = function () {
            var yy1 = x % 60
            var y = Math.floor(x / 60) + '.' + yy1
            var z = y.split("")
            z.splice(z.indexOf('.'), 1, ':')
            var j = z.join("")
            setInterval(function () {
                x1 = Math.floor(ad.currentTime)
                var y2 = (x1 / x * 100)
                // console.log(x1);
                y3 = (ad.volume * 100)
                var y1
                if (x1 % 60 > 9) {
                    y1 = Math.floor(x1 / 60) + '.' + (+x1 % 60)
                } else {
                    y1 = Math.floor(x1 / 60) + '.0' + (+x1 % 60)
                }

                // console.log(y1);
                var z1 = y1.split("")
                // console.log(z1);
                if (x1 % 60 == 0) {
                    m++
                }
                z1.splice(z1.indexOf('.'), 1, ':')
                var j1 = z1.join("")
                $('.nowTime').text("0" + j1 + "")
                $('.songbk').css('width', y2 + '%')
                $('.vobk').css('width', y3 + '%')
                if (!ad.paused) {
                    $('.play_img').addClass('act')
                    $('.play').addClass('pl')
                } else {
                    $('.play_img').removeClass('act')
                    $('.play').removeClass('pl')
                }
            }, 500)
        }
        Send();
    </script>
</body>

</html>